package gg.sulfur.client.impl.modules.exploit

import gg.sulfur.client.api.module.ModuleData
import com.google.common.eventbus.Subscribe
import gg.sulfur.client.api.module.Module
import gg.sulfur.client.impl.events.PacketEvent
import gg.sulfur.client.impl.utils.networking.ServerUtils
import gg.sulfur.client.impl.events.enums.PacketDirection
import gg.sulfur.client.impl.utils.player.ChatUtil
import net.minecraft.network.Packet
import net.minecraft.network.play.server.S08PacketPlayerPosLook

class NoRotate(moduleData: ModuleData?) : Module(moduleData) {

    @Subscribe
    fun onPacket(event: PacketEvent) {
        if (!ServerUtils.onHypixel()) {
            when (event.packetDirection) {
                PacketDirection.INBOUND -> if (event.getPacket<Packet>() is S08PacketPlayerPosLook) {
                    val packetPlayerPosLook = event.getPacket<S08PacketPlayerPosLook>()
                    packetPlayerPosLook.yaw = mc.thePlayer.rotationYaw
                    packetPlayerPosLook.pitch = mc.thePlayer.rotationPitch
                }
                PacketDirection.OUTBOUND -> {
                }
            }
        } else {
            toggle()
            ChatUtil.displayChatMessage("No Rotate is currently patched on Hypixel.")
        }
    }
}